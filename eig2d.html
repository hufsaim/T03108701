<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrix Visualization: Columns vs Eigenvectors</title>
    <style>
        body {
            font-family: 'Segoe UI', 'Malgun Gothic', sans-serif; /* í•œê¸€ í°íŠ¸ í˜¸í™˜ ì¶”ê°€ */
            background-color: #f4f6f8;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            min-height: 100vh;
        }
        
        /* Home Button */
        .home-btn {
            position: absolute;
            top: 20px; left: 20px;
            background-color: #34495e; color: white;
            text-decoration: none; padding: 10px 15px;
            border-radius: 5px; font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: 0.3s; display: flex; align-items: center; gap: 5px; z-index: 100;
        }
        .home-btn:hover { background-color: #2c3e50; transform: translateY(-2px); }

        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 900px;
            width: 100%;
            position: relative; /* í‘¸í„° ë°°ì¹˜ë¥¼ ìœ„í•´ */
        }
        .input-area {
            margin-bottom: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }
        .matrix-wrapper {
            display: inline-grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            position: relative;
            padding: 0 12px;
        }
        .matrix-wrapper::before, .matrix-wrapper::after {
            content: "";
            position: absolute;
            top: -2px; bottom: -2px;
            width: 8px;
            border: 2px solid #333;
        }
        .matrix-wrapper::before { left: 0; border-right: none; }
        .matrix-wrapper::after { right: 0; border-left: none; }
        
        input {
            width: 60px; height: 40px;
            text-align: center; font-size: 18px;
            border: 1px solid #ccc; border-radius: 4px;
            background-color: #fafafa;
        }
        button {
            padding: 10px 25px;
            background-color: #4a90e2;
            color: white; border: none; border-radius: 6px;
            font-size: 16px; cursor: pointer;
            font-weight: bold;
            transition: background 0.2s;
        }
        button:hover { background-color: #357abd; }

        /* ìº”ë²„ìŠ¤ ë°°ì¹˜ ë ˆì´ì•„ì›ƒ */
        .canvas-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            gap: 30px;
            margin-top: 10px;
            margin-bottom: 30px; /* í‘¸í„° ê³µê°„ í™•ë³´ */
        }
        .canvas-box {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        canvas {
            border: 1px solid #ddd;
            background-color: #fff;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        h3 { margin-bottom: 10px; color: #444; }
        .desc { font-size: 14px; color: #666; margin-bottom: 10px; min-height: 40px; line-height: 1.4;}
        
        .legend { margin-top: 8px; font-size: 13px; }
        .col1 { color: #e74c3c; font-weight: bold; }
        .col2 { color: #3498db; font-weight: bold; }
        .eig1 { color: #9b59b6; font-weight: bold; }
        .eig2 { color: #2ecc71; font-weight: bold; }

        /* HUFS BME Footer Style */
        .footer-signature {
            width: 100%;
            text-align: right;
            font-size: 12px;
            color: #888;
            border-top: 1px solid #eee;
            padding-top: 15px;
            margin-top: 20px;
            font-style: italic;
        }
        .footer-signature strong {
            color: #002c5f; /* HUFS Navy Blue ë¹„ìŠ·í•œ ìƒ‰ìƒ */
        }
    </style>
</head>
<body>
<a href="https://hufsaim.github.io/T03108701/" class="home-btn">ğŸ  Home</a>

<div class="container">
    <h2>Matrix Visualizer: Column vectors & Eigenvectors</h2>
    
    <div class="input-area">
        <div class="matrix-wrapper">
            <input type="number" id="a" value="2" step="0.1">
            <input type="number" id="b" value="0" step="0.1">
            <input type="number" id="c" value="0" step="0.1">
            <input type="number" id="d" value="3" step="0.1">
        </div>
        <button onclick="updateVisualization()">Visualize</button>
    </div>

    <div id="errorMsg" style="color: #e74c3c; height: 24px; font-weight: bold; margin-bottom: 10px;"></div>

    <div class="canvas-container">
        <div class="canvas-box">
            <h3>1. Column Vectors (Transform)</h3>
            <div class="desc">
                ê¸°ì € ë²¡í„° i(1,0), j(0,1)ê°€<br>ì–´ë””ë¡œ ë³€í™˜ë˜ëŠ”ì§€ ë³´ì—¬ì¤ë‹ˆë‹¤.
            </div>
            <canvas id="canvasLeft" width="350" height="350"></canvas>
            <div class="legend">
                <span class="col1">Red: Col 1 (a, c)</span> | 
                <span class="col2">Blue: Col 2 (b, d)</span>
            </div>
        </div>

        <div class="canvas-box">
            <h3>2. Eigenvectors & Eigenvalues</h3>
            <div class="desc">
                ê³ ìœ ë²¡í„° ë°©í–¥ìœ¼ë¡œ Î»ë°° ë§Œí¼<br>ëŠ˜ì–´ë‚˜ê±°ë‚˜ ì¤„ì–´ë“­ë‹ˆë‹¤. (Av = Î»v)
            </div>
            <canvas id="canvasRight" width="350" height="350"></canvas>
            <div class="legend">
                <span class="eig1">Purple: v1 (scaled by Î»1)</span> | 
                <span class="eig2">Green: v2 (scaled by Î»2)</span>
            </div>
        </div>
    </div>

    <div class="footer-signature">
        Software provided by <strong>HUFS BME Linear Algebra class</strong>
    </div>
</div>

<script>
    const scale = 30; // 1 unit = 30 pixels
    const canvasLeft = document.getElementById('canvasLeft');
    const ctxLeft = canvasLeft.getContext('2d');
    const canvasRight = document.getElementById('canvasRight');
    const ctxRight = canvasRight.getContext('2d');

    const width = canvasLeft.width;
    const height = canvasLeft.height;

    // ì´ˆê¸° ì‹¤í–‰
    window.onload = updateVisualization;

    function updateVisualization() {
        // ì…ë ¥ê°’
        const a = parseFloat(document.getElementById('a').value);
        const b = parseFloat(document.getElementById('b').value);
        const c = parseFloat(document.getElementById('c').value);
        const d = parseFloat(document.getElementById('d').value);

        // ì—ëŸ¬ ë©”ì‹œì§€ ì´ˆê¸°í™”
        document.getElementById('errorMsg').innerText = "";

        // 1. ì™¼ìª½ ìº”ë²„ìŠ¤ ê·¸ë¦¬ê¸° (Column Vectors)
        drawGrid(ctxLeft);
        // Col 1: (a, c) - ë¹¨ê°„ìƒ‰
        drawVector(ctxLeft, a, c, '#e74c3c', `(${a},${c})`);
        // Col 2: (b, d) - íŒŒë€ìƒ‰
        drawVector(ctxLeft, b, d, '#3498db', `(${b},${d})`);

        // 2. ì˜¤ë¥¸ìª½ ìº”ë²„ìŠ¤ ê·¸ë¦¬ê¸° (Eigenvectors)
        drawGrid(ctxRight);
        
        // ê³ ìœ ê°’ ê³„ì‚°
        const trace = a + d;
        const det = a * d - b * c;
        const delta = trace * trace - 4 * det;

        if (delta < 0) {
            document.getElementById('errorMsg').innerText = "ë³µì†Œìˆ˜ ê³ ìœ ê°’ì…ë‹ˆë‹¤ (íšŒì „). ì‹¤ìˆ˜ ì¢Œí‘œê³„ì— í‘œì‹œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
            return;
        }

        const l1 = (trace + Math.sqrt(delta)) / 2;
        const l2 = (trace - Math.sqrt(delta)) / 2;

        // ê³ ìœ ë²¡í„° ê³„ì‚° (ë‹¨ìœ„ ë²¡í„°)
        const v1 = getNormalizedEigenvector(a, b, c, d, l1);
        const v2 = getNormalizedEigenvector(a, b, c, d, l2);

        // ì‹œê°í™”: ë‹¨ìœ„ ë²¡í„° * ê³ ìœ ê°’ (ê¸¸ì´ ë¹„ë¡€)
        // v1 ë°©í–¥ìœ¼ë¡œ l1ë§Œí¼ ê¸¸ì´ ì„¤ì •
        drawVector(ctxRight, v1.x * l1, v1.y * l1, '#9b59b6', `Î»1=${l1.toFixed(2)}`);
        
        // v2 ë°©í–¥ìœ¼ë¡œ l2ë§Œí¼ ê¸¸ì´ ì„¤ì •
        drawVector(ctxRight, v2.x * l2, v2.y * l2, '#2ecc71', `Î»2=${l2.toFixed(2)}`);
    }

    // --- Helper Functions ---

    function getNormalizedEigenvector(a, b, c, d, lambda) {
        // (A - Î»I)x = 0 í’€ì´
        const tolerance = 1e-9;
        let x, y;

        // bê°€ 0ì´ ì•„ë‹ˆë©´: (a-Î»)x + by = 0  =>  y = -(a-Î»)x / b
        if (Math.abs(b) > tolerance) {
            x = 1;
            y = -(a - lambda) / b;
        } 
        // cê°€ 0ì´ ì•„ë‹ˆë©´: cx + (d-Î»)y = 0  =>  x = -(d-Î»)y / c
        else if (Math.abs(c) > tolerance) {
            y = 1;
            x = -(d - lambda) / c;
        } 
        // ë‘˜ ë‹¤ 0ì´ë©´ (ëŒ€ê°í–‰ë ¬)
        else {
            if (Math.abs(a - lambda) < tolerance) { x=1; y=0; } // Î» = a ì¸ ê²½ìš°
            else { x=0; y=1; } // Î» = d ì¸ ê²½ìš°
        }

        // ì •ê·œí™” (í¬ê¸° 1ë¡œ ë§Œë“¦)
        const mag = Math.sqrt(x*x + y*y);
        return { x: x/mag, y: y/mag };
    }

    function drawGrid(ctx) {
        ctx.clearRect(0, 0, width, height);
        
        // Grid Lines
        ctx.strokeStyle = '#eee';
        ctx.lineWidth = 1;
        for(let x = 0; x <= width; x += scale) {
            ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, height); ctx.stroke();
        }
        for(let y = 0; y <= height; y += scale) {
            ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(width, y); ctx.stroke();
        }

        // Axis
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.beginPath(); ctx.moveTo(0, height/2); ctx.lineTo(width, height/2); ctx.stroke(); // Xì¶•
        ctx.beginPath(); ctx.moveTo(width/2, 0); ctx.lineTo(width/2, height); ctx.stroke(); // Yì¶•
    }

    function drawVector(ctx, x, y, color, label) {
        const cx = width / 2;
        const cy = height / 2;

        // ì¢Œí‘œ ë³€í™˜ (CanvasëŠ” yê°€ ì•„ë˜ë¡œ ì¦ê°€í•˜ë¯€ë¡œ -y)
        const endX = cx + (x * scale);
        const endY = cy - (y * scale);

        // ì„  ê·¸ë¦¬ê¸°
        ctx.beginPath();
        ctx.moveTo(cx, cy);
        ctx.lineTo(endX, endY);
        ctx.strokeStyle = color;
        ctx.lineWidth = 3;
        ctx.stroke();

        // í™”ì‚´í‘œ ë¨¸ë¦¬
        const headLen = 10;
        const angle = Math.atan2(cy - endY, endX - cx); // ì‹¤ì œ ê°ë„ ê³„ì‚°
        ctx.beginPath();
        ctx.moveTo(endX, endY);
        ctx.lineTo(endX - headLen * Math.cos(angle - Math.PI / 6), endY + headLen * Math.sin(angle - Math.PI / 6));
        ctx.lineTo(endX - headLen * Math.cos(angle + Math.PI / 6), endY + headLen * Math.sin(angle + Math.PI / 6));
        ctx.fillStyle = color;
        ctx.fill();

        // ë¼ë²¨
        if(label) {
            ctx.fillStyle = "#333";
            ctx.font = "bold 12px Arial";
            ctx.fillText(label, endX + 10, endY);
        }
    }
</script>

</body>
</html>
